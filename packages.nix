pkgs:
let
  inherit (pkgs) lib;
  inherit (pkgs.stdenv) isLinux isDarwin;
  inherit (pkgs.stdenv.hostPlatform) isAarch64 isx86_64;
in
with pkgs;

# Base CLI tools (all platforms)
[
  age
  android-tools
  ansifilter
  aria2
  arp-scan
  ast-grep
  babashka
  bfg-repo-cleaner
  bun
  cached-nix-shell
  cargo
  catt
  clojure
  clojure-lsp
  cloudflared
  cmake
  csvkit
  curlie
  deno
  diffsitter
  direnv
  dnsutils
  doctl
  dogdns
  duf
  dwdiff
  edir
  erdtree
  eslint
  fastgron
  fdupes
  firefox_decrypt
  flyctl
  gdrive3
  geoipWithDatabase
  ghostscript
  git-extras
  git-open
  glab
  glow
  gnupg
  go
  gojq
  google-cloud-sdk
  gum
  htmlq
  hyperfine
  iftop
  imagemagick
  inetutils
  jet
  jo
  # json2nix # disabled: cross-compilation issues with cabal2nix
  jujutsu
  lastpass-cli
  lazydocker
  litecli
  mediainfo
  mitmproxy
  mkcert
  moreutils
  neovim-remote
  netcat
  nix-prefetch-git
  nixd
  nixfmt-rfc-style
  nushell
  nvimpager
  oci-cli
  openssl
  ouch
  pandoc
  patchelf
  patchutils
  pdftk
  pnpm
  poppler-utils
  portaudio
  procs
  pry
  pv
  redo
  rlwrap
  rubocop
  ruby
  ruby-lsp
  ruff
  rust-script
  rustc
  rustfmt
  scc
  shell-gpt
  sox
  sqlite
  sqlite-utils
  stack
  stylua
  tabview
  terminal-colors
  tidyp
  timg
  tree-sitter
  trurl
  upterm
  uv
  viddy
  w3m
  wakeonlan
  watchexec
  wdiff
  websocat
  weechat
  xh
  xurls
  yarn-berry
  zprint
]

# Linux CLI
++ lib.optionals isLinux [
  wev
  acpi
  alejandra
  alsa-lib.dev
  alsa-utils
  openssl.dev
  bat
  binutils
  btop
  curl
  delta
  detox
  eza
  fd
  ffmpeg-full
  file
  fzf
  gcc
  gh
  git
  glib
  gnumake
  htop-vim
  inotify-tools
  iotop
  jq
  lazygit
  lm_sensors
  lshw
  lsof
  mosh
  ncdu_1
  neovim
  nethogs
  nix-top
  nix-index
  nmap
  nodejs
  pciutils
  pkg-config
  psmisc
  rclone
  ripgrep
  rsync
  sshpass
  socat
  sops
  strace
  tcpdump
  tmux
  trash-cli
  tree
  unzip
  usbutils
  wget
  xdg-user-dirs
  xdg-utils
  yazi
  yt-dlp
]

# x86_64-linux CLI
++ lib.optionals (isLinux && isx86_64) [
  boot
  osquery
  pulumi-bin
]

# darwin CLI
++ lib.optionals isDarwin [
  iproute2mac
]
++ lib.optionals isDarwin (with darwin; [
  fswatch
  asitop
  coreutils
  duti
  findutils
  gawk
  gnugrep
  gnused
  libiconvReal
  lsusb
  m-cli
  mas
  psutils
  terminal-notifier
  trash
  util-linux
  watch
  xcodes
])
